<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Notifications</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <!-- Navbar Component -->
    {% include 'navbar.html' %}
    <a href="/notifications" class="btn btn-primary" style="margin-left: 10em; margin-top: 5em;">Back</a>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
        let notifications = '{{ notifications }}';

        // Currently shows all notifications in database. Once sessions is working, need to filter by user id

        notifications = notifications.replace('[(', '');
        notifications = notifications.replace(')]', '');
        notifications = notifications.split('), (');

        // Get a reference to the table
        var table = document.getElementById("tableBody");
        var deleteButton = '<button class="btn btn-danger">Delete</button>';
        // for each row of data
        for (var i = 0; i < notifications.length; i++) {
            var notification = notifications[i].split(', ');
            table.appendChild(document.createElement('tr'));
            // each cell in the row
            for (var j = 0; j < notification.length; j++) {
                var cell = document.createElement('td');
                cell.innerHTML = notification[j];
                table.appendChild(cell);
            }
            table.appendChild(document.createElement('td')).innerHTML = deleteButton;

            
        }
        });

    </script>
    <div class="container-sm">
        <div id="viewNotification" class="d-flex justify-content-center text-center">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Location</th>
                        <th scope="col">Longitude</th>
                        <th scope="col">Latitude</th>
                        <th scope="col">Radius</th>
                        <th scope="col">Magnitude Minimum</th>
                        <th scope="col">Magnitude Maximum</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
    </div>

    
    {% include 'footer.html' %}
</body>

</html>